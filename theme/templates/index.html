{% extends "base.html" %}

{% block content %}

{% if GOOGLE_ADSENSE and GOOGLE_ADSENSE.ads.index_top %}
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle ads-responsive"
       data-ad-client="{{ GOOGLE_ADSENSE.ca_id }}"
       data-ad-slot="{{ GOOGLE_ADSENSE.ads.index_top }}"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
{% endif %}

{# Calculate statistics from all articles #}
{% set all_articles = articles if articles else articles_page.object_list %}
{% set total_episodes = all_articles|length %}
{% set first_date = all_articles[-1].date if all_articles else none %}
{% set last_date = all_articles[0].date if all_articles else none %}

{% if first_date and last_date %}
  {% set days_diff = (last_date - first_date).days %}
  {% set years = (days_diff / 365)|int %}
  {% set remaining_days = days_diff % 365 %}
  {% set months = (remaining_days / 30)|int %}
  {% set days = remaining_days % 30 %}
{% endif %}

<div class="podcast-stats" style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 8px; margin-bottom: 30px; text-align: center;">
  <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
    <div style="flex: 1; min-width: 150px;">
      <div style="font-size: 2.5em; font-weight: bold; color: #4CAF50;">{{ total_episodes }}</div>
      <div style="font-size: 1em; opacity: 0.8;">Episodios</div>
    </div>
    {% if years is defined %}
    <div style="flex: 1; min-width: 150px;">
      <div style="font-size: 2.5em; font-weight: bold; color: #2196F3;">{{ years }}</div>
      <div style="font-size: 1em; opacity: 0.8;">Años</div>
    </div>
    <div style="flex: 1; min-width: 150px;">
      <div style="font-size: 2.5em; font-weight: bold; color: #FF9800;">{{ months }}</div>
      <div style="font-size: 1em; opacity: 0.8;">Meses</div>
    </div>
    <div style="flex: 1; min-width: 150px;">
      <div style="font-size: 2.5em; font-weight: bold; color: #E91E63;">{{ days }}</div>
      <div style="font-size: 1em; opacity: 0.8;">Días</div>
    </div>
    {% endif %}
  </div>
</div>

{% for article in all_articles %}
<article style="margin-bottom: 10px;">
  <div style="display: flex; align-items: baseline; gap: 10px; flex-wrap: wrap;">
    <span style="color: #888; font-size: 0.9em; min-width: 100px;">{{ article.locale_date }}</span>
    <h3 style="margin: 0; font-size: 1.1em; flex: 1;">
      <a href="{{ SITEURL }}/{{ article.url }}{% if not DISABLE_URL_HASH %}#{{ article.slug }}{% endif %}" style="text-decoration: none;">
        "{{ article.title }}" – {{ article.person }} ({{ article.company }})
      </a>
    </h3>
    {% if article.tags and not HOME_HIDE_TAGS %}
      <div style="font-size: 0.85em;">
        {% for tag in article.tags %}
          <a href="{{ SITEURL }}/{{ tag.url }}" style="opacity: 0.7;">#{{ tag }}</a>{% if not loop.last %} {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </div>
  {% if not loop.last %}
  <hr style="margin: 8px 0; opacity: 0.3;" />
  {% endif %}
</article>
{% endfor %}

{% if GOOGLE_ADSENSE and GOOGLE_ADSENSE.ads.index_bottom %}
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle ads-responsive"
       data-ad-client="{{ GOOGLE_ADSENSE.ca_id }}"
       data-ad-slot="{{ GOOGLE_ADSENSE.ads.index_bottom }}"></ins>
  <script>
    (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
{% endif %}

{% endblock %}
